"use strict";$.support.cors=!0,$(function(){(function(){var a=$(".col-md-6").width();(function(){var b=1,c=$("#galleryFrames .slide-prev"),d=$("#galleryFrames .slide-next"),e=$("#galleryFrames .gallery-hot ul"),f=$("#galleryFrames .slide-content li").length,g=$("#galleryFrames .slide-dots");e.width(a*f),$("#galleryFrames img").width(a),e.css("left",-a),d.on("click",function(){i("right")}),c.on("click",function(){i("left")}),g.on("click","li",function(){$(this).addClass("slide-active").siblings().removeClass("slide-active");var c=$(this).text()-b;b=$(this).text(),e.animate({left:"-="+a*c},300)});var h=setInterval(function(){i("right")},5e3);$("#galleryFrames").on("mouseover",function(){clearTimeout(h)}).on("mouseout",function(){h=setInterval(function(){i("right")},5e3)});var i=function(c){e.is(":animated")||("right"===c?(b++,e.animate({left:"-="+a},400),b===f-1&&(b=1,e.animate({left:-a},0))):(b--,e.animate({left:"+="+a},400),0===b&&(b=f-2,e.animate({left:-(a*(f-2))},0))),g.find("li:eq("+(b-1)+")").addClass("slide-active").siblings().removeClass("slide-active"))}})(),function(){function b(b){var e=(i-1)*a,f=$("#editorFeatured .ui-side-index");c.is(":animated")||("right"===b?d===i?(d=1,f.html(d),c.animate({left:0},400)):(d++,f.html(d),c.animate({left:"-="+a},400)):1===d?(d=i,f.html(d),c.animate({left:"-="+e},400)):(d--,f.html(d),c.animate({left:"+="+a},400)))}var c=$("#editorFeatured .screen-body"),d=1,e=$("#editorFeatured .slide-prev"),f=$("#editorFeatured .slide-next"),g=$("#editorFeatured .thumbnail"),h=g.length,i=Math.ceil(h/4),j=g.outerWidth(!0)-g.outerWidth(),k=(a-4*j)/4;g.outerWidth(k),c.width(a*i),$("#editorFeatured .ui-side-max").html(i),f.on("click",function(){b("right")}),e.on("click",function(){b("left")});var l=setInterval(function(){b("right")},5e3);$("#editorFeatured").on("mouseover",function(){clearInterval(l)}).on("mouseout",function(){l=setInterval(function(){b("right")},5e3)})}();$("#newAlbums").on("click","li",function(){if(!$(this).is(".on")){var a=$(this).text(),c="/musicindex?albumName="+encodeURIComponent("新碟榜"+a);b(c,"GET",function(a){if(a.data){var b=a.data.musics,c=$("#newAlbums .thumbnail");if(b.length<c.length){var d=b.length-1;$("#newAlbums .thumbnail:gt("+d+")").remove()}else if(b.length>c.length)for(var e=c.length;e<b.length;e++)$("#newAlbums .panel-body").append('<div class="thumbnail"><a href="" target="_blank"><img src="" alt=""/></a><div class="caption"><h5></h5><p></p></div></div>');c=$("#newAlbums .thumbnail");for(var f=0;f<c.length;f++){$(c[f]).find("a").attr("href","/music/"+b[f]._id),$(c[f]).find("h5").html(b[f].title),$(c[f]).find("p").html(b[f].singer);var g=$(c[f]).find("img");b[f].image&&(b[f].image.indexOf("http:")>-1?g.attr("src",b[f].image).attr("alt",b[f].image):g.attr("src","/upload/music/"+b[f].image).attr("alt",b[f].image))}$("#newAlbums .class-top > a").attr("href","/music/results?cat="+a.data._id+"&p=0")}else $("#newAlbums .thumbnail").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#hotProgrammes").on("click","li",function(){if(!$(this).is(".on")){var a=$(this).text(),c="/musicindex?hotProName="+encodeURIComponent("近期热门歌单"+a);b(c,"GET",function(a){var b=a.data,c=$("#hotProgrammes .thumbnail");if(b){if(b.length<c.length){var d=b.length-1;$("#hotProgrammes .thumbnail:gt("+d+")").remove()}else for(var e=c.length;e<b.length;e++)$("#hotProgrammes .panel-body").append('<div class="thumbnail"><div class="inner"><h5><a target="_blank"></a></h5><div class="content"><img src="" alt="" /></div></div></div>');c=$("#hotProgrammes .thumbnail");for(var f=0;f<b.length;f++){$(c[f]).find("h5 a").html(b[f].name).attr("href","/music/results?cat="+b[f]._id+"&p=0");var g=$(c[f]).find(".content a").length,h=Math.min(3,b[f].musics.length);if(g>h){var i=b[f].musics.length>0?$(c[f]).find(".content a:gt("+(b[f].musics.length-1)+")"):$(c[f]).find(".content a");i.remove(),$("#hotProgrammes .thumbnail:eq("+f+") span").remove()}else if(h>g){for(var j=0;h-g>j;j++)$("#hotProgrammes .thumbnail:eq("+f+") .inner .content").append("<a href =/music/"+b[f].musics[j]._id+" target =_blank title = "+b[f].musics[j].title+"><p>"+(j+1)+"."+b[f].musics[j].title+"</p></a>");b[f].musics.length>2&&$("#hotProgrammes .thumbnail:eq("+f+") .inner .content").append("<span>...</span>")}for(var k=0;k<b[f].musics.length;k++)$(c[f]).find(".content a:eq("+k+")").attr("href","/music/"+b[f].musics[k]._id).attr("title",b[f].musics[k].title),$(c[f]).find("p:eq("+k+")").html(k+1+"."+b[f].musics[k].title);var l=$(c[f]).find("img");b[f].musics[0]?b[f].musics[0].image.indexOf("http:")>-1?l.attr("src",b[f].musics[0].image).attr("alt",b[f].musics[0].image).attr("style","display: inline"):l.attr("src","/upload/music/"+b[f].musics[0].image).attr("alt",b[f].musics[0].image).attr("style","display: inline"):l.attr("style","display: none")}$("#hotProgrammes .class-top > a").attr("href","/music/results?pro="+a.dataPro._id+"&p=0")}else $("#hotProgrammes .thumbnail").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#hotArtistSongs .hot-artistTop").on("click","li",function(){if(!$(this).is(".on")){var a=$(this).text(),c="/musicindex?hotSongs="+encodeURIComponent("本周单曲榜"+a);b(c,"GET",function(a){if(a.data){var b=a.data.musics,c=$(".hotArtist-songs li");if(b.length<c.length){var d=b.length-1;$(".hotArtist-songs li:gt("+d+")").remove()}else if(b.length>c.length)for(var e=Math.min(10,b.length),f=c.length;e>f;f++)$(".hotArtist-songs ul").append('<li><a href="" target="_blank"><img src="" alt=""><h5></h5><p></p><span class="order"></span></a></li>');c=$(".hotArtist-songs li");for(var g=0;g<c.length;g++)if(b[g]){$(c[g]).find("a").attr("href","/music/"+b[g]._id),$(c[g]).find("h5").html(b[g].title),$(c[g]).find("p").html(b[g].singer+"&nbsp;/&nbsp;"+b[g].pv+"次播放"),$(c[g]).find("span").html(g+1);var h=$(c[g]).find("img");b[g].image&&(b[g].image.indexOf("http:")>-1?h.attr("src",b[g].image).attr("alt",b[g].image):h.attr("src","/upload/music/"+b[g].image).attr("alt",b[g].image))}}else $("#hotArtistSongs .hotArtist-songs li").remove()}),$(this).addClass("on").siblings("li").removeClass("on")}});var b=function(a,b,c){$.ajax({url:a,cache:!0,type:b,crossDomain:!0}).done(c)}})()});